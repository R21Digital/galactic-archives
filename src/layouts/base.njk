<!DOCTYPE html>
<html lang="en">
  <head>
    {% include "head.njk" %}
  </head>
  <body>
    <!-- Modern Header with Tab Navigation -->
    <header class="site-header">
      <div class="header-container">
        <!-- Logo and Brand -->
        <div class="header-brand">
          <a href="/" class="brand-logo">
            <span class="logo-icon">👁️</span>
            <span class="brand-text">SWGDB</span>
          </a>
        </div>

        <!-- Main Navigation Tabs -->
        <nav class="main-nav">
          <ul class="nav-menu">
                           <li class="nav-item dropdown">
                 <a href="/database/" class="nav-link">Database</a>
                 <div class="dropdown-menu">
                   <div class="dropdown-section">
                     <h4>Main Categories</h4>
                     <ul>
                       <li><a href="/database/professions/">🧑‍🚀 Professions</a></li>
                       <li><a href="/database/systems/">🧩 Systems</a></li>
                       <li><a href="/database/content/">📦 Content</a></li>
                     </ul>
                   </div>
                   <div class="dropdown-section">
                     <h4>Popular Professions</h4>
                     <ul>
                       <li><a href="/database/professions/combat/">⚔️ Combat</a></li>
                       <li><a href="/database/professions/medic/">🏥 Medic</a></li>
                       <li><a href="/database/professions/commando/">💣 Commando</a></li>
                       <li><a href="/database/professions/bounty-hunter/">🎯 Bounty Hunter</a></li>
                     </ul>
                   </div>
                 </div>
               </li>
            <li class="nav-item dropdown">
              <a href="/database/content/" class="nav-link">Content</a>
              <div class="dropdown-menu">
                <div class="dropdown-section">
                  <h4>Content Types</h4>
                  <ul>
                    <li><a href="/database/content/quests/">🗺️ Quests</a></li>
                    <li><a href="/database/content/theme-parks/">🎢 Theme Parks</a></li>
                    <li><a href="/database/content/heroics/">⚔️ Heroics</a></li>
                    <li><a href="/database/content/collections/">📦 Collections</a></li>
                  </ul>
                </div>
                <div class="dropdown-section">
                  <h4>Featured Content</h4>
                  <ul>
                    <li><a href="/database/content/legacy-quest/">📜 Legacy Questline</a></li>
                    <li><a href="/database/content/kashyyyk/">🌳 Kashyyyk</a></li>
                    <li><a href="/database/content/mustafar/">🌋 Mustafar</a></li>
                    <li><a href="/database/content/faction-quests/">🏛️ Faction Quests</a></li>
                  </ul>
                </div>
              </div>
            </li>
            <li class="nav-item dropdown">
              <a href="/database/systems/" class="nav-link">Systems</a>
              <div class="dropdown-menu">
                <div class="dropdown-section">
                  <h4>Core Systems</h4>
                  <ul>
                    <li><a href="/database/systems/combat/">⚔️ Combat</a></li>
                    <li><a href="/database/systems/crafting/">🔨 Crafting</a></li>
                    <li><a href="/database/systems/pvp/">🏆 PvP</a></li>
                    <li><a href="/database/systems/space/">🚀 Space</a></li>
                  </ul>
                </div>
                <div class="dropdown-section">
                  <h4>Advanced Systems</h4>
                  <ul>
                    <li><a href="/database/systems/housing/">🏠 Housing</a></li>
                    <li><a href="/database/systems/economy/">💰 Economy</a></li>
                    <li><a href="/database/systems/loot/">💎 Loot</a></li>
                    <li><a href="/database/systems/pets/">🐾 Pets</a></li>
                  </ul>
                </div>
              </div>
            </li>
          </ul>
        </nav>

        <!-- Search and Actions -->
        <div class="header-actions">
          <div class="search-container">
            <div class="search-box">
              <span class="search-icon">🔍</span>
              <input type="text" id="search-input" placeholder="Search SWGDB..." aria-label="Search">
            </div>
          </div>
          <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
            🌙
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="content">
      <!-- Breadcrumbs -->
      {% include "breadcrumbs.njk" %}

      <!-- Page Header -->
      <header class="page-header">
        <h1>{{ title }}</h1>
        {% if category or tags or last_updated %}
        <div class="page-meta">
          {% if category %}<strong>Category:</strong> {{ category }}{% endif %}
          {% if tags %}{% if category %} | {% endif %}<strong>Tags:</strong> {{ tags | default([]) | join(', ') }}{% endif %}
          {% if last_updated %}{% if category or tags %} | {% endif %}<em>Last updated: {{ last_updated }}</em>{% endif %}
        </div>
        {% endif %}
      </header>

      <!-- Page Content -->
      <article class="page-body">
        {{ content | safe }}
      </article>
    </main>

    <!-- Footer -->
    {% include "footer.njk" %}

    <!-- Navigation Script -->
    <script>
      // Dropdown functionality
      const dropdowns = document.querySelectorAll('.dropdown');
      
      dropdowns.forEach(dropdown => {
        const link = dropdown.querySelector('.nav-link');
        const menu = dropdown.querySelector('.dropdown-menu');
        
        // Show dropdown on hover
        dropdown.addEventListener('mouseenter', () => {
          menu.style.display = 'block';
        });
        
        // Hide dropdown when mouse leaves
        dropdown.addEventListener('mouseleave', () => {
          menu.style.display = 'none';
        });
        
        // Mobile touch support
        link.addEventListener('click', (e) => {
          if (window.innerWidth <= 768) {
            e.preventDefault();
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
          }
        });
      });

      // Theme toggle
      const themeToggle = document.getElementById('theme-toggle');
      if (themeToggle) {
        themeToggle.addEventListener('click', () => {
          document.body.classList.toggle('dark-theme');
          const isDark = document.body.classList.contains('dark-theme');
          themeToggle.textContent = isDark ? '☀️' : '🌙';
        });
      }

      // Search functionality
      const searchInput = document.getElementById('search-input');
      if (searchInput) {
        searchInput.addEventListener('input', (e) => {
          // Add search functionality here
          console.log('Searching for:', e.target.value);
        });
      }
    </script>
  </body>
</html>
