<!DOCTYPE html>
<html lang="en">
  <head>
    {% include "head.njk" %}
  </head>
  <body>
    <!-- Modern Header with New Navigation -->
    <header class="site-header">
      <div class="header-container">
        <!-- Logo and Brand -->
        <div class="header-brand">
          <a href="/" class="brand-logo">
            <span class="logo-icon">👁️</span>
            <span class="brand-text">SWGDB</span>
          </a>
        </div>

        <!-- Main Navigation Tabs -->
        <nav class="main-nav">
          <ul class="nav-menu">
            <li class="nav-item dropdown">
              <a href="/database/" class="nav-link">Database</a>
              <div class="dropdown-menu">
                <div class="dropdown-section">
                  <h4>All Professions</h4>
                  <ul>
                    <li><a href="/professions/combat/">⚔️ Combat</a></li>
                    <li><a href="/professions/medic/">🏥 Medic</a></li>
                    <li><a href="/professions/entertainer/">🎭 Entertainer</a></li>
                    <li><a href="/professions/scout/">🌿 Scout</a></li>
                    <li><a href="/professions/crafting/">🔨 Crafting</a></li>
                    <li><a href="/professions/bounty-hunter/">🎯 Bounty Hunter</a></li>
                  </ul>
                </div>
                <div class="dropdown-section">
                  <h4>Content</h4>
                  <ul>
                    <li><a href="/content/legacy/">🗺️ Legacy</a></li>
                    <li><a href="/content/mustafar/">🌋 Mustafar</a></li>
                    <li><a href="/content/theme-parks/">🎢 Theme Parks</a></li>
                    <li><a href="/content/quests/">📜 Quests</a></li>
                  </ul>
                </div>
                <div class="dropdown-section">
                  <h4>Systems</h4>
                  <ul>
                    <li><a href="/systems/galactic-fortitude/">🏛️ Galactic Fortitude</a></li>
                    <li><a href="/systems/loot/">💎 Loot</a></li>
                    <li><a href="/systems/pets/">🐾 Pets</a></li>
                    <li><a href="/systems/housing/">🏠 Housing</a></li>
                  </ul>
                </div>
              </div>
            </li>
            
            <li class="nav-item dropdown">
              <a href="/tools/" class="nav-link">Tools</a>
              <div class="dropdown-menu">
                <div class="dropdown-section">
                  <h4>Character Tools</h4>
                  <ul>
                    <li><a href="/pages/stat-optimizer/">⚡ Stat Optimizer</a></li>
                    <li><a href="/tools/professions-guide/">📚 Professions Guide</a></li>
                    <li><a href="/tools/gear-calculator/">🛡️ Gear Calculator</a></li>
                  </ul>
                </div>
                <div class="dropdown-section">
                  <h4>Community Tools</h4>
                  <ul>
                    <li><a href="/pages/leaderboard/">🏆 Leaderboard</a></li>
                    <li><a href="/tools/guild-tracker/">👥 Guild Tracker</a></li>
                    <li><a href="/tools/player-profiles/">👤 Player Profiles</a></li>
                  </ul>
                </div>
              </div>
            </li>
            
            <li class="nav-item dropdown">
              <a href="/universe/" class="nav-link">Universe</a>
              <div class="dropdown-menu">
                <div class="dropdown-section">
                  <h4>Planets & Locations</h4>
                  <ul>
                    <li><a href="/planets/tatooine/">🌍 Tatooine</a></li>
                    <li><a href="/planets/naboo/">🌊 Naboo</a></li>
                    <li><a href="/planets/endor/">🌲 Endor</a></li>
                    <li><a href="/planets/kashyyyk/">🌳 Kashyyyk</a></li>
                  </ul>
                </div>
                <div class="dropdown-section">
                  <h4>Lore & Story</h4>
                  <ul>
                    <li><a href="/lore/">📖 Lore</a></li>
                    <li><a href="/timeline/">⏰ Timeline</a></li>
                    <li><a href="/characters/">🎭 Characters</a></li>
                  </ul>
                </div>
                <div class="dropdown-section">
                  <h4>Species & Races</h4>
                  <ul>
                    <li><a href="/species/">👽 Species</a></li>
                    <li><a href="/creatures/">🐾 Creatures</a></li>
                    <li><a href="/vehicles/">🚗 Vehicles</a></li>
                  </ul>
                </div>
              </div>
            </li>
          </ul>
        </nav>

        <!-- Search and Actions -->
        <div class="header-actions">
          <div class="search-container">
            <div class="search-box">
              <span class="search-icon">🔍</span>
              <input type="text" id="search-input" placeholder="Search SWGDB..." aria-label="Search">
            </div>
          </div>
          <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation">
            ☰
          </button>
          <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
            🌙
          </button>
        </div>
      </div>
    </header>

    <!-- Main Layout - No Sidebar -->
    <div class="layout">
      <!-- Main Content -->
      <main class="content">
        <!-- Breadcrumbs -->
        {% include "breadcrumbs.njk" %}

        <!-- Page Header -->
        <header class="page-header">
          <h1>{{ title }}</h1>
          {% if category or tags or last_updated %}
          <div class="page-meta">
            {% if category %}<strong>Category:</strong> {{ category }}{% endif %}
            {% if tags %}{% if category %} | {% endif %}<strong>Tags:</strong> {{ tags | default([]) | join(', ') }}{% endif %}
            {% if last_updated %}{% if category or tags %} | {% endif %}<em>Last updated: {{ last_updated }}</em>{% endif %}
          </div>
          {% endif %}
        </header>

        <!-- Page Content -->
        <article class="page-body">
          {{ content | safe }}
        </article>
      </main>
    </div>

    <!-- Footer -->
    {% include "footer.njk" %}

    <!-- Navigation Script -->
    <script>
      // Mobile navigation toggle
      const navToggle = document.getElementById('nav-toggle');
      const mainNav = document.querySelector('.main-nav');
      
      if (navToggle && mainNav) {
        navToggle.addEventListener('click', () => {
          mainNav.classList.toggle('mobile-open');
        });
      }

      // Dropdown functionality
      const dropdowns = document.querySelectorAll('.dropdown');
      dropdowns.forEach(dropdown => {
        const link = dropdown.querySelector('.nav-link');
        const menu = dropdown.querySelector('.dropdown-menu');
        
        if (link && menu) {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            dropdown.classList.toggle('open');
          });
        }
      });

      // Close dropdowns when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.dropdown')) {
          dropdowns.forEach(dropdown => {
            dropdown.classList.remove('open');
          });
        }
      });

      // Theme toggle (optional)
      const themeToggle = document.getElementById('theme-toggle');
      if (themeToggle) {
        themeToggle.addEventListener('click', () => {
          document.body.classList.toggle('dark-theme');
          const isDark = document.body.classList.contains('dark-theme');
          themeToggle.textContent = isDark ? '☀️' : '🌙';
        });
      }

      // Search functionality
      const searchInput = document.getElementById('search-input');
      if (searchInput) {
        searchInput.addEventListener('input', (e) => {
          // Add search functionality here
          console.log('Searching for:', e.target.value);
        });
      }
    </script>
  </body>
</html>
