<!DOCTYPE html>
<html lang="en">
  <head>
    {% include "head.njk" %}
  </head>
  <body>
    <!-- Modern Header with Navigation -->
    <header class="site-header">
      <div class="header-container">
        <!-- Logo and Brand -->
        <div class="header-brand">
          <a href="/" class="brand-logo">
            <span class="logo-icon">üëÅÔ∏è</span>
            <span class="brand-text">SWGDB</span>
          </a>
        </div>

        <!-- Main Navigation -->
        <nav class="main-nav">
          <ul class="nav-menu">
            <li class="nav-item">
              <a href="/professions/" class="nav-link">All Professions</a>
            </li>
            <li class="nav-item">
              <a href="/content/" class="nav-link">Content & Systems</a>
            </li>
            <li class="nav-item">
              <a href="/universe/" class="nav-link">Universe</a>
            </li>
          </ul>
        </nav>

        <!-- Search and Actions -->
        <div class="header-actions">
          <div class="search-container">
            <div class="search-box">
              <span class="search-icon">üîç</span>
              <input type="text" id="search-input" placeholder="Search SWGDB..." aria-label="Search">
            </div>
          </div>
          <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation">
            ‚ò∞
          </button>
          <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
            üåô
          </button>
        </div>
      </div>
    </header>

    <!-- Main Layout -->
    <div class="layout">
      <!-- Sidebar for sub-navigation -->
      <aside class="sidebar" id="sidebar">
        {% include "sidebar.njk" %}
      </aside>

      <!-- Main Content -->
      <main class="content">
        <!-- Breadcrumbs -->
        {% include "breadcrumbs.njk" %}

        <!-- Page Header -->
        <header class="page-header">
          <h1>{{ title }}</h1>
          {% if category or tags or last_updated %}
          <div class="page-meta">
            {% if category %}<strong>Category:</strong> {{ category }}{% endif %}
            {% if tags %}{% if category %} | {% endif %}<strong>Tags:</strong> {{ tags | default([]) | join(', ') }}{% endif %}
            {% if last_updated %}{% if category or tags %} | {% endif %}<em>Last updated: {{ last_updated }}</em>{% endif %}
          </div>
          {% endif %}
        </header>

        <!-- Page Content -->
        <article class="page-body">
          {{ content | safe }}
        </article>
      </main>
    </div>

    <!-- Footer -->
    {% include "footer.njk" %}

    <!-- Navigation Script -->
    <script>
      // Mobile navigation toggle
      const navToggle = document.getElementById('nav-toggle');
      const sidebar = document.getElementById('sidebar');
      
      if (navToggle && sidebar) {
        navToggle.addEventListener('click', () => {
          sidebar.classList.toggle('collapsed');
        });
      }

      // Theme toggle (optional)
      const themeToggle = document.getElementById('theme-toggle');
      if (themeToggle) {
        themeToggle.addEventListener('click', () => {
          document.body.classList.toggle('dark-theme');
          const isDark = document.body.classList.contains('dark-theme');
          themeToggle.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
        });
      }

      // Search functionality
      const searchInput = document.getElementById('search-input');
      if (searchInput) {
        searchInput.addEventListener('input', (e) => {
          // Add search functionality here
          console.log('Searching for:', e.target.value);
        });
      }
    </script>
  </body>
</html>
